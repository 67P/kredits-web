<main id="index">

  <div id="stats">
    <section id="people">
      <header>
        <h2>Contributors</h2>
      </header>
      <div class="content">
        {{contributor-list contributorList=kreditsToplist
                           showUnconfirmedKredits=showUnconfirmedKredits}}

        <p class="stats">
          <span class="number">{{await kredits.totalKreditsEarned}}</span> kredits confirmed and issued to
          <span class="number">{{contributorsWithKredits.length}}</span> contributors
        </p>
        <p class="stats">
          {{input type="checkbox" id="hide-unnconfirmed-kredits" checked=showUnconfirmedKredits}}
          <label for="hide-unnconfirmed-kredits">Show unconfirmed kredits in toplist</label>
        </p>
      </div>
    </section>

    <section id="contributions-by-type">
      <header>
        <h2>Contributions by type</h2>
      </header>
      <div class="content">
        {{chart-contributions-by-type contributions=contributions}}
      </div>
    </section>
  </div>

  <div id="contributions">
    {{#if contributionsUnconfirmed}}
      <section id="contributions-unconfirmed">
        <header>
          <h2>Latest Contributions</h2>
        </header>
        <div class="content">
          {{!-- TODO: We need a better naming for kredits.hasAccounts --}}
          {{contribution-list contributions=contributionsUnconfirmedSorted
                              vetoContribution=(action "vetoContribution")
                              contractInteractionEnabled=kredits.hasAccounts}}
        </div>
      </section>
    {{/if}}

    <section id="contributions-confirmed">
      <header>
        <h2>Confirmed Contributions</h2>
      </header>
      <div class="content">
        {{contribution-list contributions=contributionsConfirmedSorted
                            vetoContribution=(action "vetoContribution")}}
      </div>

      {{!-- TODO: We need a better naming --}}
      {{#if kredits.hasAccounts}}
        <p class="actions">
          {{#link-to "proposals.new"}}Create new proposal{{/link-to}}
        </p>
      {{/if}}
    </section>
  </div>

  {{#if kredits.hasAccounts}}
    <section id="add-contributor">
      <header>
        <h2>Add Contributor</h2>
      </header>

      <div class="content">
        {{#if kredits.currentUser.isCore}}
          {{add-contributor contributors=contributors save=(action "save")}}
        {{else}}
          Only core team members can add new contributors. Please ask someone to set you up.
        {{/if}}
      </div>
    </section>
  {{/if}}

</main>
